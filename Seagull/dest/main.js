/**
 * @license RequireJS text 2.0.5+ Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*
 * Swipe 2.0
 *
 * Brad Birdsall
 * Copyright 2013, MIT License
 *
 */

function Swipe(e,t){function h(){o=s.children,f=o.length,o.length<2&&(t.continuous=!1),i.transitions&&t.continuous&&o.length<3&&(s.appendChild(o[0].cloneNode(!0)),s.appendChild(s.children[1].cloneNode(!0)),o=s.children),u=new Array(o.length),a=e.getBoundingClientRect().width||e.offsetWidth,s.style.width=o.length*a+"px";var n=o.length;while(n--){var r=o[n];r.style.width=a+"px",r.setAttribute("data-index",n),i.transitions&&(r.style.left=n*-a+"px",g(n,l>n?-a:l<n?a:0,0))}t.continuous&&i.transitions&&(g(v(l-1),-a,0),g(v(l+1),a,0)),i.transitions||(s.style.left=l*-a+"px"),e.style.visibility="visible"}function p(){t.continuous?m(l-1):l&&m(l-1)}function d(){t.continuous?m(l+1):l<o.length-1&&m(l+1)}function v(e){return(o.length+e%o.length)%o.length}function m(e,n){if(l==e)return;if(i.transitions){var s=Math.abs(l-e)/(l-e);if(t.continuous){var f=s;s=-u[v(e)]/a,s!==f&&(e=-s*o.length+e)}var h=Math.abs(l-e)-1;while(h--)g(v((e>l?e:l)-h-1),a*s,0);e=v(e),g(l,a*s,n||c),g(e,0,n||c),t.continuous&&g(v(e-s),-(a*s),0)}else e=v(e),b(l*-a,e*-a,n||c);l=e,r(t.callback&&t.callback(l,o[l]))}function g(e,t,n){y(e,t,n),u[e]=t}function y(e,t,n){var r=o[e],i=r&&r.style;if(!i)return;i.webkitTransitionDuration=i.MozTransitionDuration=i.msTransitionDuration=i.OTransitionDuration=i.transitionDuration=n+"ms",i.webkitTransform="translate("+t+"px,0)"+"translateZ(0)",i.msTransform=i.MozTransform=i.OTransform="translateX("+t+"px)"}function b(e,n,r){if(!r){s.style.left=n+"px";return}var i=+(new Date),u=setInterval(function(){var a=+(new Date)-i;if(a>r){s.style.left=n+"px",w&&S(),t.transitionEnd&&t.transitionEnd.call(event,l,o[l]),clearInterval(u);return}s.style.left=(n-e)*(Math.floor(a/r*100)/100)+e+"px"},4)}function S(){E=setTimeout(d,w)}function x(){w=0,clearTimeout(E)}var n=function(){},r=function(e){setTimeout(e||n,0)},i={addEventListener:!!window.addEventListener,touch:"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,transitions:function(e){var t=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"];for(var n in t)if(e.style[t[n]]!==undefined)return!0;return!1}(document.createElement("swipe"))};if(!e)return;var s=e.children[0],o,u,a,f;t=t||{};var l=parseInt(t.startSlide,10)||0,c=t.speed||300;t.continuous=t.continuous!==undefined?t.continuous:!0;var w=t.auto||0,E,T={},N={},C,k={handleEvent:function(e){switch(e.type){case"touchstart":this.start(e);break;case"touchmove":this.move(e);break;case"touchend":r(this.end(e));break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"otransitionend":case"transitionend":r(this.transitionEnd(e));break;case"resize":r(h)}t.stopPropagation&&e.stopPropagation()},start:function(e){var t=e.touches[0];T={x:t.pageX,y:t.pageY,time:+(new Date)},C=undefined,N={},s.addEventListener("touchmove",this,!1),s.addEventListener("touchend",this,!1)},move:function(e){if(e.touches.length>1||e.scale&&e.scale!==1)return;t.disableScroll&&e.preventDefault();var n=e.touches[0];N={x:n.pageX-T.x,y:n.pageY-T.y},typeof C=="undefined"&&(C=!!(C||Math.abs(N.x)<Math.abs(N.y))),C||(e.preventDefault(),x(),t.continuous?(y(v(l-1),N.x+u[v(l-1)],0),y(l,N.x+u[l],0),y(v(l+1),N.x+u[v(l+1)],0)):(N.x=N.x/(!l&&N.x>0||l==o.length-1&&N.x<0?Math.abs(N.x)/a+1:1),y(l-1,N.x+u[l-1],0),y(l,N.x+u[l],0),y(l+1,N.x+u[l+1],0)))},end:function(e){var n=+(new Date)-T.time,r=Number(n)<250&&Math.abs(N.x)>20||Math.abs(N.x)>a/2,i=!l&&N.x>0||l==o.length-1&&N.x<0;t.continuous&&(i=!1);var f=N.x<0;C||(r&&!i?(f?(t.continuous?(g(v(l-1),-a,0),g(v(l+2),a,0)):g(l-1,-a,0),g(l,u[l]-a,c),g(v(l+1),u[v(l+1)]-a,c),l=v(l+1)):(t.continuous?(g(v(l+1),a,0),g(v(l-2),-a,0)):g(l+1,a,0),g(l,u[l]+a,c),g(v(l-1),u[v(l-1)]+a,c),l=v(l-1)),t.callback&&t.callback(l,o[l])):t.continuous?(g(v(l-1),-a,c),g(l,0,c),g(v(l+1),a,c)):(g(l-1,-a,c),g(l,0,c),g(l+1,a,c))),s.removeEventListener("touchmove",k,!1),s.removeEventListener("touchend",k,!1)},transitionEnd:function(e){parseInt(e.target.getAttribute("data-index"),10)==l&&(w&&S(),t.transitionEnd&&t.transitionEnd.call(e,l,o[l]))}};return h(),w&&S(),i.addEventListener?(i.touch&&s.addEventListener("touchstart",k,!1),i.transitions&&(s.addEventListener("webkitTransitionEnd",k,!1),s.addEventListener("msTransitionEnd",k,!1),s.addEventListener("oTransitionEnd",k,!1),s.addEventListener("otransitionend",k,!1),s.addEventListener("transitionend",k,!1)),window.addEventListener("resize",k,!1)):window.onresize=function(){h()},{setup:function(){h()},slide:function(e,t){x(),m(e,t)},prev:function(){x(),p()},next:function(){x(),d()},stop:function(){x()},getPos:function(){return l},getNumSlides:function(){return f},kill:function(){x(),s.style.width="",s.style.left="";var e=o.length;while(e--){var t=o[e];t.style.width="",t.style.left="",i.transitions&&y(e,0,0)}i.addEventListener?(s.removeEventListener("touchstart",k,!1),s.removeEventListener("webkitTransitionEnd",k,!1),s.removeEventListener("msTransitionEnd",k,!1),s.removeEventListener("oTransitionEnd",k,!1),s.removeEventListener("otransitionend",k,!1),s.removeEventListener("transitionend",k,!1),window.removeEventListener("resize",k,!1)):window.onresize=null}}}define("text",["module"],function(e){var t,n,r,i,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,a=typeof location!="undefined"&&location.href,f=a&&location.protocol&&location.protocol.replace(/\:/,""),l=a&&location.hostname,c=a&&(location.port||undefined),h=[],p=e.config&&e.config()||{};t={version:"2.0.5+",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:p.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(r){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,p.isBuild&&(h[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText){r();return}p.isBuild=i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),h=p.useXhr||t.useXhr;!a||h(u,f,l,c)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(h.hasOwnProperty(n)){var s=t.jsEscape(h[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(p.env==="node"||!p.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node)n=require.nodeRequire("fs"),t.get=function(e,t){var r=n.readFileSync(e,"utf8");r.indexOf("﻿")===0&&(r=r.substring(1)),t(r)};else if(p.env==="xhr"||!p.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);p.onXhr&&p.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r(o)):n(s.responseText))},s.send(null)};else if(p.env==="rhino"||!p.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(p.env==="xpconnect"||!p.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),t.get=function(e,t){var n,s,o={},u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),s=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),s.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),o),s.close(),n.close(),t(o.value)}catch(a){throw new Error((u&&u.path||"")+": "+a)}};return t}),define("text!templates/index.html",[],function(){return'<header>\n    <h2 class="title">Swipe 2</h2>\n</header>\n\n<div id="mySwipe" style="margin:0 auto" class="wrapper">\n    <div class="swipe-wrap">\n        <%_.each(photo,function(item,index) {%>\n            <div>\n                <section>\n                    <div class="container photo">\n                        <header>\n                            <ul>\n                                <li>V.<%=item.vol%></li>\n                            </ul>\n                        </header>\n                        <div class="main">\n                            <img src="http://lazyseagull.com/img/photo/photo_20150312.jpg" >\n                            <div class="etc"><%=item.name%><hr>by <%=item.author%></div>\n                        </div>\n                        <div class="sub">\n                            <div class="date">\n                                <h4><%=item.time%></h4>\n                                <div class="YMD"><%=item.time%></div>\n                            </div>\n                            <div class="quotation">\n                                <%=item.quotation%>\n                            </div>\n                        </div>\n                    </div>\n                </section>\n            </div>\n        <%})%>\n    </div>\n</div>\n\n<footer>\n    <span class="btn active photo">图</span>\n    <span class="btn tao">淘</span>\n</footer>'}),define("text!templates/tao.html",[],function(){return'<header>\n    <h2 class="title">Swipe 2</h2>\n</header>\n\n<div id="mySwipe" style="margin:0 auto" class="wrapper">\n    <div class="swipe-wrap">\n        <%_.each(tao,function(item,index) {%>\n            <div>\n                <section>\n                    <div class="container tao">\n                        <a onclick=<%=item.websrc%> ><img src="http://lazyseagull.com/img/tao/tao_20150312.jpg" ></a>\n                        <div class="etc"><%=item.etc%></div>\n                    </div>\n                </section>\n            </div>\n        <%})%>\n    </div>\n</div>\n\n<footer>\n    <span class="btn photo">图</span>\n    <span class="btn active tao">淘</span>\n</footer>'}),function(){var e="libs/";require.config({shim:{_:{exports:"_"}},paths:{text:e+"3dlibs/require.text",Swipe:e+"3dlibs/swipe",AbstractApp:e+"base/abstract.app",AbstractView:e+"base/abstract.view",AbstractModel:e+"base/abstract.model",AbstractStorage:e+"base/abstract.storage",Core:e+"base/core.inherit",Ajax:e+"common/ajax",UtilityDate:e+"common/utility.date",Models:"models/model",Stores:"stores/store"}})}(),define("config.js",function(){}),define("Core",[],function(){var e=[].slice,t=function(){};return t.Class=function(){function r(){_.isFunction(this.initialize)&&this.initialize.apply(this,arguments)}if(arguments.length===0||arguments.length>2)throw"参数错误";var t=null,n=e.call(arguments);typeof n[0]=="function"&&(t=n.shift()),n=n[0],r.superclass=t;if(t){var i=function(){};i.prototype=t.prototype,r.prototype=new i}var s=r.superclass&&r.superclass.prototype;for(var o in n){var u=n[o];if(s&&typeof u=="function"){var a=/^\s*function\s*\(([^\(\)]*?)\)\s*?\{/i.exec(u.toString())[1].replace(/\s/g,"").split(",");a[0]==="$super"&&s[o]&&(u=function(t,n){return function(){var r=this,i=[function(){return s[t].apply(r,arguments)}];return n.apply(this,i.concat(e.call(arguments)))}}(o,u))}if(_.isObject(r.prototype[o])&&_.isObject(u)&&typeof r.prototype[o]!="function"&&typeof u!="fuction"){var f={};_.extend(f,r.prototype[o]),_.extend(f,u),r.prototype[o]=f}else r.prototype[o]=u}return r.prototype.initialize||(r.prototype.initialize=function(){}),r.prototype.constructor=r,r},t}),define("AbstractApp",["Core"],function(e){var t=new e.Class({propertys:function(){this.viewRootPath="app/views/",this.defaultView="index",this.request,this.viewId,this.mainframe,this.viewport,this.views={},this.curView,this.lastView,this.isCreate=!1,this.history=[],this.status="init",this.animations={},this.isAnimat=!0,this.animForwardName="slideleft",this.animBackwardName="slideright",this.animNoName="noAnimate",this.hasPushState=!!window.history&&!!window.history.pushState,this.animatName=null,this.viewMapping={},this.container=$("body"),this.interface=["forward","back"]},initialize:function(e){this.propertys(),this.setOption(e),this.createViewPort(),this.buildEvent(),this.pushHistory(),this.start()},setOption:function(e){_.extend(this,e)},createViewPort:function(){if(this.isCreate)return;var e=['<div class="main">','<div class="main-viewport"></div>',"</div>"].join("");this.mainframe=$(e),this.viewport=this.mainframe.find(".main-viewport"),this.container.empty(),this.container.append(this.mainframe),this.isCreate=!0},buildEvent:function(){this.hasPushState?$(window).bind("popstate",_.bind(this.loadViewByUrl,this)):$(window).bind("hashchange",_.bind(this.loadViewByUrl,this))},start:function(){this.loadViewByUrl()},loadViewByUrl:function(e){this.animatName||(this.animatName=this.animBackwardName),this.parseUrl(),this.switchView(this.viewId)},parseUrl:function(){var e=decodeURIComponent(location.href).toLowerCase(),t=this.getViewIdRule(e),n=_.getUrlParam(e);t=t||this.defaultView,this.viewId=t,this.request={viewId:t,path:e,query:n}},switchView:function(e){var t=e,n=this.views[t],r=this.curView;r&&r!=n&&(this.lastView=r);if(n){if(n==this.curView)return;this.curView=n;var i=(r||n).viewname;this.curView.onPreShow()}else this.loadView(e,function(e){if($('[page-url="'+t+'"]').length>0)return;n=new e(this,t),this.views[t]=n,n.turning=_.bind($.proxy(function(){this.startAnimation(function(e,t){$(".sub-viewport").hide(),e.$el.show(),this.animatName=null})},this),this),this.curView=n;var i=typeof r!="undefined"?r.viewname:null;this.curView.onPreShow()})},startAnimation:function(e){var t=this.curView,n=this.lastView;n&&n.setScrollPos(window.scrollX,window.scrollY),this.isAnimat||(this.animatName=this.animNoName),this.animations[this.animatName]&&n?this.animations[this.animatName].call(this,t,n,e,this):(n&&n.hide(),t.show(),this.animatName=null,e&&e.call(this,t,n)),this.isAnimat=!0,this.animatName=null},loadView:function(e,t){var n=this;requirejs([this.buildUrl(e)],function(e){t&&t.call(n,e)})},buildUrl:function(e){var t=this.viewMapping[e];return t?t:this.viewRootPath+e},getViewIdRule:function(e){var t="",n="",r,i;return this.hasPushState?t=_.getUrlParam(e,"viewid"):(t=e.replace(/^[^#]+(#(.+))?/g,"$2").toLowerCase().replace(/^#+/i,""),r=/^([^?&|]*)(.*)?$/i.exec(t),i=r[1]?r[1].split("!"):[],t=(i.shift()||"").replace(/(^\/+|\/+$)/i,"")),t},setUrlRule:function(e,t,n){if(this.hasPushState){var r,i=window.location.href,s="",o="";if(n)for(r in n)s+="&"+r+"="+n[r];o=i.indexOf("?")?i.substr(0,i.indexOf("?"))+"?viewid="+e:i+"?viewid="+e,t?history.replaceState("",{},o+s):history.pushState("",{},o+s)}else t?window.location.replace(("#"+e).replace(/^#+/,"#")):window.location.href=("#"+e).replace(/^#+/,"#")},forward:function(e,t){if(!e)return;t=t||{};var n=t.replace,r=t.isNotAnimat;param=t.param,e=e.toLowerCase(),r&&(this.isAnimat=!1),this.animatName=t.animatName||this.animForwardName,this.setUrlRule(e,n,param),this.pushHistory(),this.hasPushState&&this.loadViewByUrl()},back:function(e,t){t=t||{};var n=t.isNotAnimat;n&&(this.isAnimat=!1),this.animatName=this.animBackwardName,e?(t.animatName=this.animBackwardName,this.forward(e,t)):window.history.length==1?this.forward(this.defaultView,t):history.back()},pushHistory:function(){var e=window.location.href;this.history.push(e)}});return t}),function(){window.getViewTemplatePath=function(e){return"text!templates/"+e+".html"},require(["AbstractApp"],function(e){var t=new e({hasPushState:!1,defaultView:"index",viewRootPath:"views/"})})}(),define("main.js",function(){}),define("AbstractView",["Core"],function(e){var t=new e.Class({propertys:function(){this.scrollPos={x:0,y:0}},createDom:function(e){this.viewname=e,this.id=_.uniqueId("view_"),this.$el=$('<div class="sub-viewport" page-id="'+e+'" id="'+this.id+'"></div>'),this.$el.hide(),this.app.viewport.append(this.$el)},initInterface:function(){var e="",t,n;for(t=0,n=this.app.interface.length;t<n;t++)e=this.app.interface[t],this[e]=$.proxy(this.app[e],this.app)},initialize:function(e,t){this.propertys(),this.app=e,this.createDom(t),this.initInterface(),this.onCreate()},turning:function(){},onCreate:function(){},onPreShow:function(){},onShow:function(){},load:function(){this.app.viewport.find("#"+this.id)[0]||this.app.viewport.append(this.$el),this.onPreShow()},show:function(){document.activeElement&&document.activeElement.blur(),window.scrollTo(0,0),this.$el.show(),this.onShow(),this.restoreScrollPos(),this.bindEvents()},hide:function(){this.$el.hide(),this.onHide(),this.unBindEvents()},refresh:function(){this.load()},destroy:function(){this.unBindEvents(),this.$el.remove(),delete this},$:function(e){return this.$el.find(e)},setScrollPos:function(e,t){this.scrollPos={x:e,y:t}},restoreScrollPos:function(){window.scrollTo(this.scrollPos.x,this.scrollPos.y)},bindEvents:function(){var e=this.events;if(!e&&!(e=_.result(this,"events")))return this;this.unBindEvents();var t=/^(\S+)\s*(.*)$/,n,r,i,s,o;for(n in e){r=e[n],_.isFunction(r)||(r=this[e[n]]);if(!r)continue;i=n.match(t),s=i[1],o=i[2],r=_.bind(r,this),s+=".delegateEvents"+this.id,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},unBindEvents:function(){return this.$el.off(".delegateEvents"+this.id),this}});return t}),define("Ajax",[],function(){function n(e,t,n,r){var i=a(e,t,n,r);return i.type="GET",u(i)}function r(e,n,r,i){var s=n.contentType;n=JSON.stringify(n);var o=a(e,n,r,i);return o.type="POST",o.dataType="json",o.timeout=3e4,o.contentType=t(s)||"application/json",u(o)}function i(e,t,n,r){var i=a(e,t,n,r);return i.type="GET",i.dataType="jsonp",i.crossDomain=!0,u(i)}function s(e,n,r,i,s){var o=r.contentType;n.toLowerCase()!=="get"&&(r=JSON.stringify(r));var f=a(e,r,i,s);return f.type=n,f.dataType="json",f.crossDomain=!0,f.data=r,f.contentType=t(o)||"application/json",u(f)}function o(e,t,n,r){var i=null,s="";typeof t=="string"?i=$("#"+t):i=$(t),i&&i.length>0&&(s=i.serialize());var o=a(e,s,n,r);return u(o)}function u(e){var t=(new Date).getTime(),n={url:e.url,type:e.type,dataType:e.dataType,data:e.data,contentType:e.contentType,timeout:e.timeout||5e4,success:function(t){e.callback(t)},error:function(t){e.error&&e.error(t)}};return e.url.indexOf(window.location.host)===-1&&(n.crossDomain=!!e.crossDomain),$.ajax(n)}function a(e,t,n,r){return{url:e,data:t,callback:n,error:r}}var e={json:"application/json; charset=utf-8",jsonp:"application/json"},t=function(t){return t&&(t=e[t]?e[t]:t),t};return{get:n,post:r,jsonp:i,cros:s,form:o}}),define("AbstractModel",["Core","Ajax"],function(e,t){var n=new e.Class({initData:function(){this.dataformat=null,this.contentType="json",this.method="POST"},propertys:function(){this.url=null,this.param=null},setOption:function(e){_.extend(this,e)},assert:function(){if(this.url===null)throw"not override url property";if(this.param===null)throw"not override param property"},initialize:function(e){this.initData(),this.propertys(),this.setOption(e),this.assert()},setParam:function(e,t){typeof e=="object"&&!t?this.param=e:this.param[e]=t},getParam:function(){return this.param},buildurl:function(){throw"[ERROR]abstract method:buildurl, must be override"},execute:function(e,n,r,i,s){var o=this.buildurl()+this.url,u=this,a=$.proxy(function(t){var n=typeof this.dataformat=="function"?this.dataformat(t):t;typeof e=="function"&&e.call(r||this,n,t)},this),f=$.proxy(function(e){typeof n=="function"&&n.call(r||this,e)},this),s=s||_.clone(this.getParam()||{});s.contentType=this.contentType,this.contentType==="json"?t.cros(o,this.method,s,a,f):this.contentType==="jsonp"?t.jsonp(o,s,a,f):t.post(o,s,a,f)}});return n.getInstance=function(){return this.instance instanceof this?this.instance:this.instance=new this},n}),define("Models",["Core","AbstractModel"],function(e,t){var n={},r="http://m.ctrip.com/restapi/soa2/10079";return n.TEST=new e.Class(t,{initialize:function(){this.url="/SHXHomeAd",this.param={Version:6e3}},buildurl:function(){return r}}),n.NAXT=new e.Class(t,{initialize:function(){this.url="/SHXHomeSearch",this.param={Version:5100,SearchInfo:{CityID:2}},this.dataformat=function(e){return e}},buildurl:function(){return r}}),n}),define("UtilityDate",["Core"],function(e){var t={};return t.Date=new e.Class({initialize:function(e){e=e||new Date,this.date=new Date(e)},addDay:function(e){return e=e||0,this.date.setDate(this.date.getDate()+e),this},addMonth:function(e){return e=e||0,this.date.setMonth(this.date.getMonth()+e),this},addHours:function(e){return e=e||0,this.date.setHours(this.date.getHours()+e),this},addMinutes:function(e){return e=e||0,this.date.setMinutes(this.date.getMinutes()+e),this},addSeconds:function(e){return e=e||0,this.date.setSeconds(this.date.getSeconds()+e),this},addYear:function(e){return e=e||0,this.date.setYear(this.date.getFullYear()+e),this},setHours:function(){return this.date.setHours.apply(this.date,arguments),this},valueOf:function(){return this.date},getTime:function(){return this.date.valueOf()},toString:function(){return this.date.toString()},format:function(e){typeof e!="string"&&(e="");for(var t in this._MAPS)e=this._MAPS[t].call(this,e,this.date,t);return e},diffMonth:function(e){var n=parseInt(this.format("Y"),10),r=parseInt(this.format("m"),10),i=new t.Date(e),s=parseInt(i.format("Y"),10),o=parseInt(i.format("m"),10);return(s-n)*12+(o-r)},_DAY1:["周日","周一","周二","周三","周四","周五","周六"],_DAY2:["星期天","星期一","星期二","星期三","星期四","星期五","星期六"],_MAPS:{d:function(e,t,n){var r=t.getDate().toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},j:function(e,t,n){return e.replace(new RegExp(n,"mg"),t.getDate())},N:function(e,t,n){var r=t.getDay();return r===0&&(r=7),e.replace(new RegExp(n,"mg"),r)},w:function(e,t,n){var r=t.getDay(),i=this._DAY1[r];return e.replace(new RegExp(n,"mg"),i)},W:function(e,t,n){var r=t.getDay(),i=this._DAY2[r];return e.replace(new RegExp(n,"mg"),i)},m:function(e,t,n){var r=(t.getMonth()+1).toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},n:function(e,t,n){return e.replace(n,t.getMonth()+1)},Y:function(e,t,n){return e.replace(new RegExp(n,"mg"),t.getFullYear())},y:function(e,t,n){return e.replace(new RegExp(n,"mg"),t.getYear())},g:function(e,t,n){var r=t.getHours();return r>=12&&(r-=12),e.replace(new RegExp(n,"mg"),r)},G:function(e,t,n){return e.replace(new RegExp(n,"mg"),t.getHours())},h:function(e,t,n){var r=t.getHours();return r>=12&&(r-=12),r+="",r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},H:function(e,t,n){var r=t.getHours().toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},i:function(e,t,n){var r=t.getMinutes().toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},s:function(e,t,n){var r=t.getSeconds().toString();return r.length<2&&(r="0"+r),e.replace(new RegExp(n,"mg"),r)},I:function(e,t,n){var r=t.getMinutes().toString();return e.replace(new RegExp(n,"mg"),r)},S:function(e,t,n){var r=t.getSeconds().toString();return e.replace(new RegExp(n,"mg"),r)},D:function(e,t,n){var r=new Date;r.setHours(0,0,0,0),t=new Date(t.valueOf()),t.setHours(0,0,0,0);var i=864e5,s="",o=t-r;return o>=0&&(o<i?s="今天":o<2*i?s="明天":o<3*i&&(s="后天")),e.replace(new RegExp(n,"mg"),s)}}}),t.Date}),define("AbstractStorage",["Core","UtilityDate"],function(e,t){var n=t,r="ClEAR_OVERDUE_CATCH",i=new e.Class({initData:function(){this.proxy=localStorage},propertys:function(){this.lifeTime="30M"},initialize:function(){this.initData(),this.propertys(),this.removeOverdueCathch(),this.assert()},assert:function(){},removeOverdueCathch:function(){var e=(new n).getTime(),t=this.proxy.getItem(r),i=[],s=[];if(!t)return;i=JSON.parse(t);for(var o=0,u;o<i.length;o++)u=i[o],(new Date(u.timeout)).getTime()<=e?this.proxy.removeItem(u.key):s.push(u);this.proxy.setItem(r,JSON.stringify(s))},setOverdueCathch:function(e,t){if(!e||!t)return;var n={},i=[],s=this.proxy.getItem(r);n.key=e,n.timeout=t,s&&(i=JSON.parse(s));var o=!1;for(var u=0,a;u<i.length;u++)a=i[u],a.key==e&&(i[u]=n,o=!0);o||i.push(n),this.proxy.setItem(r,JSON.stringify(i))},buildStorageObj:function(e,t){return{value:e,timeout:t}},getLifeTime:function(){var e=0,t=this.lifeTime+"",n=t.charAt(t.length-1),r=+t.substring(0,t.length-1);return typeof n=="number"?n="M":n=n.toUpperCase(),n=="D"?e=r*24*60*60:n=="H"?e=r*60*60:n=="M"?e=r*60:n=="S"?e=r:e=r*60,e},getNowTime:function(){return new n},set:function(e,t){var r=this.getNowTime();r.addSeconds(this.getLifeTime());var i=r?new n(r):(new n).addDay(30),s=i.format("Y/m/d H:i:s");this.setOverdueCathch(e,s);var o=this.buildStorageObj(t,s);try{return this.proxy.setItem(e,JSON.stringify(o)),!0}catch(u){u.name=="QuotaExceededError"&&this.proxy.clear(),console&&0}return!1},get:function(e){var t,n=null;try{t=this.proxy.getItem(e),t&&(t=JSON.parse(t),n=t.value)}catch(r){console&&0}return n},remove:function(e){return this.proxy.removeItem(e)},getAll:function(){var e=this.proxy.length,t=[];for(var n=0;n<e;n++){var r=this.proxy.key(n),i={key:r,value:this.get(r)};t.push(i)}return t},clear:function(){this.proxy.clear()},gc:function(){var e=this.proxy,t=this.proxy.length;for(var n=0;n<t;n++){var r=e.key(n);if(r=="GUID")break;try{this.get(r)||this.remove(r)}catch(i){}}}});return i}),define("Stores",["Core","AbstractStorage"],function(e,t){var n={};return n.TEST=new e.Class(t,{propertys:function(){this.lifeTime="1D"}}),n.NAXT=new e.Class(t,{propertys:function(){this.lifeTime="2D"}}),n}),(window.jQuery||window.Zepto)&&function(e){e.fn.Swipe=function(t){return this.each(function(){e(this).data("Swipe",new Swipe(e(this)[0],t))})}}(window.jQuery||window.Zepto),define("Swipe",function(){}),define("views/index",["Core","AbstractView","Models","Stores",getViewTemplatePath("index"),"Swipe"],function(e,t,n,r,i){var s=new e.Class(t,{onCreate:function(){this.$el.html(i),0},events:{"click .tao":function(){this.forward("tao")}},onPreShow:function(){0,this.turning()},onShow:function(){var e={photo:[{time:"2015-03-11",vol:"544",src:"http://lazyseagull.com/img/photo/photo_20141205.jpg",name:"猫",author:"SIHAOGOR",quotation:"我想所谓孤独,就是你面对的那个人,他的情绪和你自己的情绪,不在同一个频率。from《十一种孤独》"},{time:"2015-03-12",vol:"541",src:"http://lazyseagull.com/img/photo/photo_20141205.jpg",name:"猫1",author:"SIHAOGOR1",quotation:"我1想所谓孤独,就是你面对的那个人,他的情绪和你自己的情绪,不在同一个频率。from《十一种孤独》"}]};this.$el.html(_.template(i,e));var t=this.$el.find("#mySwipe")[0];window.mySwipe=Swipe(t,{continuous:!1,callback:function(e,t){0}}),this.$el.find(".container").css("height",document.body.scrollHeight-100)},onHide:function(){0}});return s}),define("views/tao",["Core","AbstractView","Models","Stores",getViewTemplatePath("tao"),"Swipe"],function(e,t,n,r,i){var s=new e.Class(t,{onCreate:function(){this.$el.html(i),0},events:{"click .photo":function(){this.forward("index")}},onPreShow:function(){0,this.turning()},onShow:function(){var e={tao:[{time:"2015-03-11",vol:"544",coversrc:"http://lazyseagull.com/img/tao/tao_20141207.jpg",websrc:"http://t.cn/RzwbUXS",etc:"AISEN - 可弯曲超软洗手刷。AISEN 可弯曲超软洗手刷，清洗双手死角，指甲，连手指之间细微的部分也是容易清洗到的。弹性十足，可弯曲，柔软质地不伤手，使用放心。"},{time:"2015-03-12",vol:"545",coversrc:"http://lazyseagull.com/img/tao/tao_20141207.jpg",websrc:"http://t.cn/RzwbUXS",etc:"AISEN1 - 可弯曲超软洗手刷。AISEN 可弯曲超软洗手刷，清洗双手死角，指甲，连手指之间细微的部分也是容易清洗到的。弹性十足，可弯曲，柔软质地不伤手，使用放心。"}]};this.$el.html(_.template(i,e));var t=this.$el.find("#mySwipe")[0];window.mySwipe=Swipe(t,{continuous:!1,callback:function(e,t){0}}),this.$el.find(".container").css("height",document.body.scrollHeight-100)},onHide:function(){0}});return s});